---
description: Kubernetesのハードニング（RBAC、アドミッションポリシー、ネットワークポリシー、シークレット、サプライチェーン）
languages:
- javascript
- yaml
alwaysApply: false
---

## クラウド & オーケストレーション（Kubernetes）

Kubernetesクラスタとワークロードのハードニング：ID管理、ポリシー、ネットワーク、シークレット、サプライチェーン制御。

### 制御項目
- ID管理とRBAC：ユーザーとサービスアカウントに最小権限を付与。ネームスペースを分離し、必要なロールのみをバインド。
- ポリシー：アドミッション制御（OPA/Gatekeeper/Kyverno）でイメージソース、ケーパビリティ、root実行、ネットワークポリシー、必須のラベル/アノテーションを検証。
- ネットワーク：ネットワークポリシーでデフォルト拒否を設定。明示的なエグレス許可リストを定義。メッシュ内ではサービスIDとmTLSを使用。
- シークレット：KMSプロバイダーを使用。マニフェストに平文を記載しない。定期的にローテーション。シークレットマウントパスを制限。
- ノード：ハードニングされたOS、自動更新、最小限の攻撃対象領域。taint/tolerationと専用ノードで機密ワークロードを分離。
- サプライチェーン：イメージ署名を検証。アドミッションでプロビナンス（SLSA/Sigstore）を強制。

### チェックリスト
- チーム/アプリごとにネームスペースを分離。RBACロールのスコープを限定。監査ログを有効化。
- アドミッションポリシーでイメージプロビナンス、非root実行、ケーパビリティ削減、読み取り専用ルートFS、ネットワークポリシーの存在を強制。
- ingress/egressのネットワークポリシーを配置。デプロイメントごとにサービスアカウントのスコープを限定。

### 検証
- クラスタ適合性とCISベンチマークスキャンを実施。
- CIでマニフェストのポリシーテスト（OPAユニットテスト）を実行。定期的なアドミッションドライランを実施。

### インシデント対応準備
- 監査ログを有効化し、集中管理。etcdへのアクセスを制限。バックアップ/リストアをテスト。
- MFAと期限付き承認を備えたブレークグラスロールを定義。
