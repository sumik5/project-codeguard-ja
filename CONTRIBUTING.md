# コントリビューション

## コントリビュート方法

Project CodeGuardはコミュニティからの貢献を積極的に募集しているオープンソースプロジェクトです。このドキュメントでは、参加方法と、変更の提案、レビュー、マージのプロセスについて説明します。

一般的に、Project CodeGuardのコントリビューターには以下が期待されます：
- プロジェクトに関連する1つ以上の分野に精通していること
- ワークストリーム成果物の開発と完成に貢献すること
- 担当したイシューを確実に完了すること
- 1つ以上のPRがマージされるなど、長期的なコミットメントを示すこと
- プロジェクトのスタイルとテストガイドラインに従うこと
- ブランチ、PR、コードスタイルの規約に従うこと
- プロジェクトの品質とユーザーエクスペリエンスを大幅に向上させる方法で貢献すること

CodeGuardの任意のリポジトリに貢献する際は、まずGitHubイシューで実施したい変更について議論してください。小さな修正の場合は、明確なコンテキストを含むPRを直接開くことができます。大きな変更や新機能の場合は、まずイシューを開いて範囲とアプローチを調整してください。

プロジェクトでのすべてのやり取りは、[行動規範](CODE_OF_CONDUCT.md)に従います。これには、イシューやプルリクエストの作成、イシューやプルリクエストへのコメント、およびリアルタイムスペースでのすべてのやり取りが含まれます。

潜在的な貢献について議論する際は、異なる意見を尊重してください。すべてのコントリビューターにとって、歓迎的で協力的な環境を目指しています。

## コンテンツ更新ガバナンスプロセス

CodeGuardは、プロジェクトのルール、コントロール、その他の構造化されたコンテンツの更新に対して、2段階のガバナンスプロセスを使用します。これにより、技術レビューとコミュニティガバナンスを分離し、コンテンツの品質とプロジェクトの整合性の両方を確保します。

### コンテンツ更新とは

コンテンツ更新には以下の変更が含まれます：
- ルール定義、カテゴリ、メタデータ
- セキュリティコントロール仕様とマッピング
- コンポーネントまたはタクソノミー要素と関係
- コンテンツ指向のドキュメントとガイダンス資料

### 2段階プロセスの概要

**ステージ1: 技術レビュー** – コンテンツ`feature`ブランチは、標準的なPRレビュー後に`develop`ブランチにマージされます

**ステージ2: コミュニティレビュー** – `develop`ブランチの蓄積された変更の隔週ガバナンスレビューを、`main`へのリリース前に実施します

```
feature-branch  →  develop    →    main
     ↑                 ↑             ↑
  ステージ1         ステージ2        リリース
  (技術)          (コミュニティ)
```

### コンテンツ以外の変更

以下のタイプの変更は、2段階コンテンツ更新プロセスの対象外であり、既存のワークフローに従い続けます：
- バグ修正 – 技術的な修正とエラー解決
- 実装変更 – コードロジック、アルゴリズム、システム機能の更新
- インフラストラクチャ更新 – CI/CD、ビルドプロセス、デプロイ設定
- ドキュメント修正 – 技術ドキュメントの修正、README更新など
- セキュリティパッチ – 即時デプロイが必要な重要なセキュリティ関連修正
- 依存関係更新 – ライブラリアップグレードと依存関係のセキュリティパッチ

これらの除外される変更タイプは、リポジトリメンテナーとポリシーによって決定される、`main`への直接ワークフローに従うことができます。

## 初めてのコントリビューター

プロジェクトが初めてで、エントリーポイントを探している場合は、オープンイシューを確認してください。`good first issue`タグが付いたイシューは、初めてのコントリビューターに適した、小規模でスコープが明確なタスクです。取り組みたいものを見つけたら、イシューにコメントするか、自分自身をアサインしてください。メンテナーがアサインを承認します。

## 新しいイシューの提出

まだ存在しない新しいイシューを作成したい場合は、以下を含めて新しいものを開いてください：
- 簡潔な問題記述または機能リクエスト
- 再現手順（バグの場合）
- 期待される動作と実際の動作
- 環境の詳細（バージョン、OS）（該当する場合）
- 提案されるアプローチまたは代替案（オプションですが役立ちます）

**セキュリティバグを発見した場合は、GitHubで報告しないでください。代わりに、[SECURITY.md](SECURITY.md)のセキュリティ手順を参照してください。**

## 新しいプルリクエストの提出とレビュープロセス

プルリクエストを提出するプロセスは、変更のタイプによって異なります：

### コンテンツ更新の場合（2段階プロセス）

コンテンツ更新を提出する際は、以下の手順に従ってください：

1. このリポジトリをGitHubアカウントにフォークします。書き込み権限がある場合は、直接ブランチを作成できます。
2. `develop`ブランチを基に、作業内容を簡潔に説明する名前で新しいブランチを作成します。
3. 変更が検証に合格し、既存のテストが失敗しないことを確認します。
4. `develop`ブランチに対してプルリクエストを提出します。

#### コンテンツ更新PRレビュー

**ステージ1レビュー**: `develop`へのPRは、コンテンツの正確性、フォーマットとスキーマ検証（該当する場合）、コードの整合性、コミットメッセージの品質を含む技術基準でレビューされます。

**ステージ2レビュー**: 定期的なサイクル（通常は隔週）で、サイクル期間中にマージされたすべてのコンテンツ変更を含む`develop`から`main`へのPRが作成されます。これは、必要に応じてレイジーコンセンサスや単純投票手順を使用して、メンテナーとコントリビューターによるコミュニティレビューを受けます。

### コンテンツ以外の変更の場合（標準プロセス）

コンテンツ以外の変更（バグ修正、実装変更、インフラストラクチャ更新など）を提出する際は、以下の手順に従ってください：

1. このリポジトリをGitHubアカウントにフォークします（書き込み権限がある場合はブランチを作成できます）。
2. `main`ブランチを基に、作業内容を簡潔に説明する名前で新しいブランチを作成します。
3. 変更が既存のテストを失敗させないことを確認します。
4. `main`ブランチに対してプルリクエストを提出します。

#### コンテンツ以外のPRレビュー
1. PRはメンテナーによってレビューされます。スコープに応じて、追加のレビュアーが要請されることがあります。
2. レビュアーの応答は通常、3営業日以内に行われます。

### 一般的なレビューガイドライン

メンテナーは、プルリクエストとイシューを3営業日以内にレビューすることを目指します。

このプロジェクトでは[レイジーコンセンサス](https://openoffice.apache.org/docs/governance/lazyConsensus.html)が実践されています。GitHubまたは公式プラットフォーム上のプロジェクトドキュメントへの大きな変更は、主要な世界の祝日を考慮して、7営業日以上のコメント期間を設けたイシューまたはディスカッションを伴うべきです。

## ブランチ命名とコミットメッセージ

### ブランチ命名

- `main` – メイン開発ブランチで権威あるソース。コンテンツ変更のコミュニティ承認後に更新
- `develop` – コンテンツ更新のコミュニティレビューのためのステージングエリア。コンテンツ変更のfeatureブランチはこのブランチをターゲットにします
- `feature` – feature/this-is-a-new-feature-branch（コンテンツ更新の場合は`develop`、コンテンツ以外の変更の場合は`main`をターゲット）
- `codebugfix` – codebugfix/description-of-the-bug（通常は`main`をターゲット）
- `languagefix` – languagefix/description-of-the-language-fix（通常は`main`をターゲット）
- `docs` – docs/description-of-the-documentation-change（通常は`main`をターゲット。ドキュメント変更は上記のコンテンツ更新ルールから除外されます）
- `release` – release/description-of-the-release – 準備ができたら`main`からカット

### コミットメッセージフォーマット

「このコミットは…」という文を続ける形で、変更を明確に説明するコミットメッセージを書いてください。

良いコミットメッセージの例：
- "このコミットは、examplesフォルダの名前をreference-implementationsに変更します。"
- "このコミットは、セキュリティアドバイザリに対処するために依存関係のバージョンをアップします。"

## フィードバック

このプロジェクトに関する質問やコメントは、GitHubイシューまたはPRコメントとして作成できます。より広範な議論が必要な場合は、GitHubディスカッション（有効な場合）を開くか参照するか、イシュー内で短い設計ドキュメントを提案してください。
