---
description: ネットワークセグメンテーションセキュリティアーキテクチャ
languages:
- c
- javascript
- shell
- yaml
alwaysApply: false
---

## ネットワークセグメンテーションガイドライン

攻撃面を制限し横方向の移動を防ぐための安全なネットワークアーキテクチャを実装するための必須プラクティス。

### ネットワークセグメンテーションの目的

ネットワークセグメンテーションは、現代のサービスにおける多層防御の中核です。適切なセグメンテーションは以下を防止することで攻撃者を遅らせます：
- SQLインジェクションが直接データベースアクセスを提供すること
- 侵害されたワークステーションが機密システムにアクセスすること
- 組織サーバー間の横方向の移動
- 侵害された内部システムからコマンドアンドコントロールサーバーへのアクセス

### 3層セキュリティアーキテクチャ

明確なセキュリティゾーンを持つ必須の3層アーキテクチャを実装：

#### フロントエンド層
インターネット向けコンポーネントを含む：
- ロードバランサー
- アプリケーション層ファイアウォール（WAF）
- Webサーバー
- Webキャッシュ

フロントエンドシステムはミドルウェア層とのみ通信し、バックエンドと直接通信してはいけない。

#### ミドルウェア層
ビジネスロジックと処理を収容：
- システムロジックを実装するWebアプリケーション
- 認可サービス
- 分析サービス
- メッセージキュー
- ストリーム処理プラットフォーム

ミドルウェアはフロントエンド層とバックエンド層間のすべての通信を仲介。

#### バックエンド層
機密データと重要システムを保存：
- SQLデータベース
- LDAPディレクトリとドメインコントローラー
- 暗号鍵ストレージ
- ファイルサーバー

バックエンドシステムはミドルウェア層からの接続のみを受け入れる。

### セグメンテーション実装

#### 通信フロールール
厳格な単方向通信パターンを実施：
- 外部ユーザーはフロントエンドにのみ接続
- フロントエンドはミドルウェアとのみ通信
- ミドルウェアは必要に応じてバックエンドと通信
- フロントエンドからバックエンドへの直接通信は許可しない

#### DMZ設定
フロントエンド層には2つのDMZセグメントを含める：
- DMZインバウンド: インターネットからアクセス可能なサービス、WAFで保護
- DMZアウトバウンド: 外部ネットワークアクセスを持つがインバウンドインターネットアクセスのないサービス

#### ファイアウォールポリシー要件
- 広範なネットワークアクセスではなく明示的な許可ルールを定義
- 同じ層の異なる情報システム間のクロスシステム通信を禁止
- ミドルウェアが外部バックエンドシステムに直接アクセスすることを防止
- セキュリティポリシーですべての許可されたネットワークフローを文書化

### サービス間通信セキュリティ

#### 異なるアプリケーション間
- 異なるシステムのフロントエンドとミドルウェアセグメントは直接通信できない
- ミドルウェアは他のサービスのバックエンドセグメントにアクセスできない
- 各アプリケーションは可能な限り専用のネットワークセグメントを使用

#### ロードバランサーアプローチ
複数のアプリケーションをホストするネットワークが少ない組織向け：
- 各ネットワークセグメント内にロードバランサーを配置
- 各ネットワークへの1つのポートのみを開く（ロードバランサーへ）
- アプリケーション層パラメータに基づいてトラフィックルーティングを実行
- 注意: このアプローチはアクセス制御をネットワーク層ではなくOSIレイヤー7に移動

### ネットワークセキュリティポリシードキュメント

組織は以下を記述した書面ポリシーを維持する必要があります：
- ファイアウォールルールとネットワークアクセス権限
- 許可された通信フローを示す視覚的な図
- 異なるユースケースのための特定の規定

ポリシーは以下にアクセス可能である必要があります：
- ネットワーク管理者
- セキュリティ代表者
- IT監査人
- システムアーキテクトと開発者
- IT管理者

#### CI/CDネットワーク権限
ソフトウェア開発システムのための特定のネットワークアクセスルールを定義、以下を含む：
- ソースコードリポジトリアクセス
- ビルドシステム接続
- デプロイメントパイプラインネットワーク要件

#### 安全なロギングアーキテクチャ
改ざん防止ロギングを実装：
- syslogプロトコルを使用してログを別のサーバーにコピー
- syslogは新しいイベントの追加のみを許可し、ログの変更を防止
- ログストレージをアプリケーションシステムから分離
- セキュリティイベントと攻撃指標の両方を含める

#### モニタリングシステムアクセス
ITモニタリングシステムのネットワークポリシーを定義：
- モニタリングツールがアクセスできるセグメントを指定
- データ収集とアラートのネットワークフローを文書化
- モニタリングがセキュリティバイパスの機会を生じさせないことを確認

### 実装ベストプラクティス

- ネットワーク図を使用してセグメンテーション設計を伝達
- 複数のファイアウォール層を持つ多層防御を実装
- ネットワークアクセスルールとセグメンテーション効果を定期的に監査
- 禁止されたネットワーク接続を試行してセグメンテーションをテスト
- セグメンテーションポリシー違反のネットワークトラフィックを監視
- アプリケーションアーキテクチャの進化に応じてセグメンテーションルールを更新

[包括的なガイダンス](https://github.com/sergiomarotco/OWASP-Network-segmentation-cheat-sheet)に従ったこれらの原則に基づくネットワークセグメンテーションは、攻撃面を大幅に削減し、潜在的な侵害の影響を制限する基礎的なセキュリティを提供します。
